
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>M1: Diseñar una especificación para la API</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="es-m1-disenar-api"
                  title="M1: Diseñar una especificación para la API"
                  environment="web"
                  feedback-link="https://github.com/fcatae">
    
      <google-codelab-step label="Crear la API de Experiencia" duration="0">
        <p>En este paso, creará una API y la diseñará utilizando <strong><em>Anypoint Design Center.</em></strong></p>
<ol type="1" start="1">
<li>Puede acceder a <strong><em>Anypoint Design Center</em></strong> desde la página de inicio de Anypoint Platform:<br><img alt="Anypoint Platform Home Page" style="width: 792.50px" src="img/a41f7a8f2c02cc3.png"><br><br>Alternativamente, puede usar el &#34;menú de hamburguesas&#34; desde cualquier página dentro del portal de Anypoint Platform para navegar al <strong><em>Design Center:<br><br></em></strong><img alt="Hamburger Menu" style="width: 820.50px" src="img/664a4011e0648427.png"><br><br><img alt="Hamburger Menu Selection" style="width: 797.50px" src="img/753edb99d0f8baa3.png"><br></li>
<li><strong><em>Anypoint Design Center </em></strong>se utiliza para diseñar sus API. Cuando llegue a la página de inicio del <strong><em>Design Center</em></strong>, verá una lista de API que ya han sido diseñadas por su organización.<br><br><img alt="Design Center Home" style="width: 834.50px" src="img/41b94d3e3c058e03.png"><br></li>
<li>Para crear una nueva API, haga clic en el <strong>Create New</strong> botón.<br><br><img alt="Create Button" style="width: 826.41px" src="img/9c9091925b628f7.png"><br></li>
<li>Seleccione <strong>New API Spec</strong>.<br><br><img alt="Create Button" style="width: 865.50px" src="img/aea5f2ccb7e0ff35.png"><br></li>
<li>Establezca los siguientes valores en el formulario <strong>New API Spec</strong>:</li>
</ol>
<ul>
<li>API Title: <strong><code>&lt;nombre de usuario&gt;: API de Omni Channel Experience</code></strong><code>.</code></li>
<li><strong><em>How do you want to draft the API Spec?:</em></strong> Seleccione la opción <strong> &#34;</strong><strong><em>Guide me through it</em></strong><strong>&#34;.</strong></li>
<li><strong><em>Nota</em></strong><em>: dado que trabajamos en una organización compartida, asigne un nombre único a su API. Para los propósitos de este ejercicio, anteponga su API con el nombre de usuario de su cuenta de Anypoint.<br><br></em><img alt="Create Button" style="width: 805.50px" src="img/c440831d61592719.png"><br></li>
</ul>
<ol type="1" start="6">
<li>Haga clic en <strong>Create API Spec.</strong> Esto creará la estructura básica de su especificación API basada en RAML. <br><img alt="Create Button" style="width: 904.50px" src="img/ec2243b98b8189e1.png"><br></li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Crear el recurso de lista de pedidos" duration="0">
        <p>Para proporcionar la funcionalidad de manejo de pedidos para la aplicación de comercio electrónico, diseñaremos un recurso de lista en nuestra API usando RAML.</p>
<p><strong><em>Anypoint Design Center </em></strong>proporcionará un editor de API visual para comenzar con un tutorial paso a paso que lo guiará a través del diseño visual de su API.<br></p>
<p class="image-container"><img alt="API Editor" style="width: 824.50px" src="img/ebedccc286d9d72.png"><br></p>
<ol type="1" start="1">
<li>Creemos nuestra API y saltemos el tutorial por ahora.</li>
<li>Agreguemos algunos detalles generales sobre la API.</li>
</ol>
<ul>
<li>Asigne un nombre a la API estableciendo el título en <strong><code>&lt;nombre de usuario&gt; API de Omni Channel Experience</code></strong><code>.</code></li>
<li>Dado que este es nuestro primer diseño, designemos esta API como versión 1.0. Establecer la versión en <code>1.0</code></li>
<li>Establezca el data type en <strong>application/json.</strong></li>
<li>La mayoría de las especificaciones de API designarán un URI base de punto final de API. Esto le dice al consumidor de la API dónde accederá a la API. Establezca el URI en <a href="http://localhost:8081/api" target="_blank"><code>http://localhost:8081/api<br></code></a>. Ahora debería ver lo siguiente en el diseño de su API:<br><br><img alt="API Visual Config" style="width: 808.50px" src="img/649f43a4f165fd55.png"><br></li>
</ul>
<ol type="1" start="3">
<li>Ahora necesitas agregar un recurso. Un recurso es la definición de una entidad que administrará su API. Haga clic en el <strong>+</strong> a la derecha de <strong>Resource</strong>, luego elija <strong>Add resource</strong>.<br><br><img alt="API Add Resource" style="width: 855.50px" src="img/2e698b306f9670a7.png"><br></li>
<li>Cambie el nombre del recurso de <strong>/new-resource </strong>a <code>/order</code>. Seleccione  <strong>POST </strong>y, en la documentación, déle una descripción: <code>Creates a new order instance</code> como se muestra. Observe la RAML generada a la derecha.<br><img alt="module1 lab2 raml post" style="width: 844.50px" src="img/c56a93de32b037c1.png"><br>¡Felicidades! Ha completado la creación de un recurso <strong>/order</strong> con una descripción básica.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Crear el recurso de instancia de pedido" duration="0">
        <p>En el paso anterior, creamos un recurso de recopilación de pedidos y un método <strong>POST</strong> para permitir que la aplicación de comercio electrónico cree una nueva instancia de pedido. ¿Qué pasaría si quisiéramos que la aplicación de comercio electrónico obtenga el estado de un solo pedido? Necesitamos crear un nuevo recurso debajo de la instancia de <strong>/order</strong> y usar el método <strong>GET</strong>.</p>
<ol type="1" start="1">
<li>Pase el cursor del mouse sobre el recurso <strong>/order</strong>. Notará que un <strong><code>+</code></strong> aparece en el panel de recursos.</li>
<li>Cambie el nombre de <strong>/order/new-resource</strong> a <code>/order/{order_id}</code>.<br><br><img alt="module1 lab2 add nested resource" style="width: 789.50px" src="img/2dbfff36f0c22b0c.gif"><br></li>
<li>Como hicimos en el paso anterior, ingrese una descripción: <code>Order instance resource allowing to retrieve an order </code><img alt="module1 lab2 design center api orders get description" style="width: 764.50px" src="img/aabfed8611e2ce0f.png"><br></li>
<li>Bajo el método <strong>GET</strong>, haga clic en la pestaña <strong>Responses</strong>, luego haga clic en el botón <strong>Add New Response.<br><br></strong><img alt="module1 lab2 design center api orders get new response" style="width: 824.50px" src="img/7c109b72564103ff.png"><br></li>
<li>Ahora debería ver una respuesta con un código de respuesta 200 OK.<br><br><img alt="module1 lab2 design center api orders get response 200" style="width: 820.50px" src="img/2d5a51d2d3725ea4.png"><br></li>
<li>Debajo de la respuesta, haz clic en <strong>Add Body</strong> para agregar una respuesta JSON al método <strong>GET</strong>.<br><br><img alt="module1 lab2 get response add body" style="width: 716.84px" src="img/b18fab940a33e232.png"><br></li>
<li>Observe la especificación RAML a la derecha actualizada con el cuerpo.<br><br><img alt="module1 lab2 add response body" style="width: 800.50px" src="img/e49777a1698b2154.png"><br></li>
<li>Agreguemos un JSON de ejemplo a la respuesta. Necesitamos expandir la sección &#34;<strong>Bodies</strong>&#34; haciendo clic en &#34;<strong>Details</strong>&#34;.<br><br><img alt="module1 lab2 expand response body" style="width: 831.50px" src="img/b3955be5f0bd17c6.png"><br></li>
<li>Una vez expandida, verá la sección &#34;<strong>Example</strong>&#34;.<br><br><img alt="module1 lab2 expanded response body" style="width: 856.50px" src="img/a1a5496cd8dde75b.png"><br></li>
</ol>
<p>10. En &#34;<strong>Example</strong>&#34;, haga clic en la pestaña <strong>Edit</strong> y copie y pegue el siguiente código JSON<br><br><img alt="module1 lab2 add example" style="width: 792.50px" src="img/3fe44a2e5d48f2dc.png"><br></p>
<pre><code>{
        &#34;order_id&#34;: &#34;order_22&#34;,
  &#34;tracking_code&#34;: &#34;12310391209318&#34;,
  &#34;rel_self&#34;: &#34;http://alc.mulesoft.com / api / orders / oder / order_22 &#34;,
  &#34; creation_date &#34;:&#34; 2015/12/31 10:00:00 &#34;,
  &#34; cost &#34;: {
    &#34; price &#34;: 12,
    &#34; tax &#34;: 1,
    &#34; final_price &#34;: 13
  } ,
  &#34;envío&#34;: {
    &#34;shipping_address_id&#34;: &#34;1122&#34;,
    &#34;rel_address&#34;: &#34;http://alc.mulesoft.com/api/users/user/vip_user_8/address/1122&#34;
  },
  &#34;elementos&#34;: [
    {
      &#34; product_id &#34;:&#34; 121 &#34;,
      &#34; rel_product &#34;:&#34; http://alc.mulesoft.com/api/products/product/121 &#34;,
      &#34; cantidad &#34;: 1
    },
    {
      &#34; product_id &#34;:&#34; 122 &#34;,
      &#34; rel_product &#34; : &#34;http://alc.mulesoft.com/api/products/product/122&#34;,
      &#34;cantidad&#34;: 2
    }
  ]
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Cambiar entre la vista RAML y OAS" duration="0">
        <p>Dentro de la plataforma Anypoint puede trabajar con RAML y OAS sin problemas. Puede comprobarlo yendo al panel derecho, donde se muestra el código de especificación, y seleccionando en la parte inferior la pestaña <strong>OAS</strong>.<br></p>
<p class="image-container"><img alt="module1 lab2 design center oas console" style="width: 378.00px" src="img/3e98a5bb67b72517.gif"><br></p>
<p>Haga clic en la pestaña <strong>RAML</strong> para continuar con el siguiente paso.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Publique su API en Anypoint Exchange" duration="0">
        <ol type="1" start="1">
<li>Haga clic en el botón <strong>Publish</strong> luego en el botón <strong>Publish To Exchange</strong>.<br><br><img alt="Publish to Exchange" style="width: 834.91px" src="img/1268221f8b68a0d9.png"><br><br><img alt="Publish to Exchange" style="width: 805.50px" src="img/471ce34aa2a06704.gif"><br></li>
<li>Aparecerá una ventana emergente para capturar los atributos que desea publicar en <strong><em>Exchange</em></strong>. La mayoría de estos campos se completarán previamente y se verificará la RAML para garantizar que no haya errores. Complete el campo de <strong>Asset Version</strong> con <strong><code>1.0.0</code></strong><strong>.<br><br></strong><img alt="module1 lab3 publish exchange tags" style="width: 790.50px" src="img/113dc50377f08f35.png"><br></li>
<li>Haga clic en el <strong>Publish to Exchange</strong> cuando haya terminado de revisar el nombre de la API y la información de la versión. ¡Hemos publicado nuestra API Omni Channel Experience en Anypoint Exchange para que otros desarrolladores la descubran y la consuman!<br><br><img alt="module1 lab3 publish exchange success" style="width: 812.50px" src="img/38fb0aab4ef1a87f.png"><br>Cada vez que publique una Especificación de API, generará dos activos:</li>
</ol>
<ul>
<li>Especificación RAML: Esta es la Especificación RAML. Todos en la organización pueden descubrir las especificaciones y la documentación.</li>
<li>Rest Connector: este es un conector generado automáticamente para la API que acaba de definir. Cubriremos esto con más detalles. </li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
